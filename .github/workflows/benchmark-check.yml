name: 'Benchmark Check'

on:
  workflow_dispatch:

  push:


env:
  MY_ENV_VAR: 'my-env-var-1'
  CACHE_KEY: 'my-cache-key-2'


jobs:
  benchmark-check:
    name: 'Benchmark Check'
    runs-on: 'ubuntu-latest'

    steps:
    - name: 'Cache file'
      uses: actions/cache/restore@v4
      with:
        path: ${{ github.workspace }}/test
        key: ${{ env.CACHE_KEY }}

    - name: 'Read file'
      if: always()
      run: |
        echo '------------------------'
        ls -la ${{ github.workspace }}
        echo '------------------------'
        ls -la ${{ github.workspace }}/test
        echo '------------------------'
        cd ${{ github.workspace }}/test
        echo '------------------------'
        pwd
        ls -la ${{ github.workspace }}/test
        cat ${{ github.workspace }}/test/file.txt
        echo '------------------------'

# ############################

    - name: 'Writer file'
      if: always()
      run: |
        mkdir -p ${{ github.workspace }}/test
        echo ${{ env.MY_ENV_VAR }} > "${{ github.workspace }}/test/file.txt"
        pwd
        ls -la ${{ github.workspace }}/test
        echo "--->"
        cat ${{ github.workspace }}/test/file.txt

    - name: 'Cache file'
      if: always()
      uses: actions/cache/save@v4
      with:
        path: ${{ github.workspace }}/test
        key: ${{ env.CACHE_KEY }}-${{ github.run_number }}
